##### 前言

svg中的id，在整个node tree中不允许重复，不允许空格符号，不允许为空。

svg中的defs，W3规定，不会阻止其他元素来关联当前元素的defs的内容，因此全局node tree下的defs是公用的。

##### 问题

在一个dom上下文中如果使用了多个相同的svg，比如一个tab组件的各个页面中，都用到了一个空数据的svg图片，该图片内部有定义defs和id的关联引用到一些填充或者渐变效果。当切换第一个tab之后的tab后，该svg图片会显示异常。

##### 原因

第一个tab的svg一般会在dom的最上层位置，切换其他tab时，第一个tab可能会隐藏，比如css的`display: none`（当然，如果直接不渲染，比如vif，则判定第二个svg的状态）。该tab下的svg也会被隐藏。此时其他tab的svg引用的defs会是第一个svg下的，此时的效果显示状态也会以第一个svg的显示状态来决定，也就是隐藏。这样图片所有引用的渐变或者填充效果都无法显示，导致了异常。

##### 解决方案

1. 使用不同的svg图片
2. 给svg的各个id添加动态定义的效果，比如用vue包装svg成组件后，动态生成id数组，保证每一个svg被使用时都产生新的id内容。
3. 既然svg通过一个dom上下文来确定当前所有svg的信息，那么将不同的svg放入不同的dom上下文中就好了，比如通过`iframe`或`object`标签包装一层。
4. svgo插件，能够通过prefixId配置，处理svg时能够自动帮忙在原始id的基础上添加自定义的新id。当然，这与2类似。

